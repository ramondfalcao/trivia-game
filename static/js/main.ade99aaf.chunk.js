(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/logoBlue.29b72877.svg"},33:function(e,t,a){e.exports=a.p+"static/media/timerImg.001dc1c0.svg"},34:function(e,t,a){e.exports=a.p+"static/media/tristeza.719377f2.gif"},35:function(e,t,a){e.exports=a.p+"static/media/happy.bd98d43a.gif"},36:function(e,t,a){e.exports=a(61)},41:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},54:function(e,t){},55:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),i=(a(41),a(14)),o=a(13),u=a(17),l=a(28),m=a(29),p=a(12),d=a(9),f=a.n(d),h=a(15);function b(e){return{type:"GET_TOKEN",payload:e.token}}function v(e){return{type:"FAILED_REQUEST",payload:e}}function E(e){return{type:"GET_QUESTIONS",payload:e}}var g={name:"",assertions:0,score:0,gravatarEmail:""};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=t.name,n=t.email,r=t.type,c=t.score;switch(r){case"ADD_NEW_PLAYER":return Object(p.a)(Object(p.a)({},e),{},{name:a,gravatarEmail:n});case"SET_SCORE":return Object(p.a)(Object(p.a)({},e),{},{score:e.score+c,assertions:e.assertions+1});case"RESET_SCORE":return Object(p.a)(Object(p.a)({},e),{},{score:0,assertions:0});default:return e}};var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOKEN":return t.payload;default:return e}},k={};var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_QUESTIONS":return Object(p.a)(Object(p.a)({},e),{},{payload:t.payload});case"SET_TIMEOUT":return Object(p.a)(Object(p.a)({},e),{},{timeout:!0});default:return e}},N=Object(u.combineReducers)({player:y,token:O,trivia:j}),w=Object(u.createStore)(N,Object(l.composeWithDevTools)(Object(u.applyMiddleware)(m.a))),S=w;window.Cypress&&(window.store=w);var C=a(3),x=a(4),A=a(6),T=a(5),_=a(1),q=(a(46),a(20)),R=(a(47),a(30)),D=a.n(R),I=function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(q.a)({},n,r),e.enableButton)},e.enableButton=function(){var t=e.state,a=t.name,n=t.email,r=a.length>0,c=n.length>0;e.setState({isButtonDisabled:!(r&&c)})},e.handleClick=Object(h.a)(f.a.mark((function t(){var a,n,r,c,s,i,o,u;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.dispatchUser,r=a.requestToken,c=a.history,s=a.dispatchResetScore,i=e.state,o=i.name,u=i.email,t.next=4,r();case 4:n(o,u),s(),c.push("/quiz");case 7:case"end":return t.stop()}}),t)}))),e.state={isButtonDisabled:!0,name:"",email:""},e}return Object(x.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.isButtonDisabled;return r.a.createElement("main",{className:"main-login"},r.a.createElement("img",{className:"logo",src:D.a,alt:"logo"}),r.a.createElement("form",{className:"form"},r.a.createElement("label",{htmlFor:"name"},r.a.createElement("input",{placeholder:"Name",className:"input-login",type:"text","data-testid":"input-player-name",id:"name",name:"name",value:t,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{placeholder:"Email",className:"input-login",type:"text","data-testid":"input-gravatar-email",id:"email",name:"email",value:a,onChange:this.handleChange})),r.a.createElement("button",{className:"btn-play","data-testid":"btn-play",type:"button",disabled:n,onClick:this.handleClick},"Play"),r.a.createElement(i.b,{to:"/configuracoes"},r.a.createElement("button",{className:"btn-config",type:"button","data-testid":"btn-settings"},"Configura\xe7\xf5es"))))}}]),a}(n.Component),Q=Object(o.b)(null,(function(e){return{requestToken:function(){return e(function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_TOKEN"}),e.prev=1,e.next=4,fetch("https://opentdb.com/api_token.php?command=request");case 4:return a=e.sent,e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",t(b(n)));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",t(v(e.t0)));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())},dispatchUser:function(t,a){return e(function(e,t){return{type:"ADD_NEW_PLAYER",name:e,email:t}}(t,a))},dispatchResetScore:function(){return e({type:"RESET_SCORE"})}}}))(I),B=a(32),U=a.n(B),F=function(e){var t=U()(e);return"https://www.gravatar.com/avatar/".concat(t)},P=(a(55),function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(C.a)(this,a),(n=t.call(this,e)).state={url:""},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.email,t=F(e);this.setState({url:t})}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=this.state.url;return r.a.createElement("header",{className:"header-quiz"},r.a.createElement("img",{"data-testid":"header-profile-picture",className:"header-profile",src:n,alt:"Foto de Perfil"}),r.a.createElement("p",{"data-testid":"header-player-name"},t),r.a.createElement("p",{"data-testid":"header-score"},"\u2b50 Score: ".concat(a)))}}]),a}(n.Component)),M=Object(o.b)((function(e){return{email:e.player.gravatarEmail,name:e.player.name,score:e.player.score}}))(P),W=a(25),z=function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"Carregando...")}}]),a}(n.Component),J=(a(56),a(33)),G=a.n(J),K=a(24),L=a.n(K),Y=function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).handleTimer=function(){e.intervalID=setInterval((function(){e.setState((function(e){return{timer:0===e.timer?0:e.timer-1}}),(function(){0===e.state.timer&&(e.setState({timeout:!0}),clearInterval(e.intervalID))}))}),1e3)},e.getQuestions=Object(h.a)(f.a.mark((function t(){var a,n,r,c,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.dispatchFetchQuestions,r=a.token,c=e.state.index,t.next=4,n(r);case 4:s=e.props.propsQuestions,e.setState({questions:s.results,loading:!1},(function(){var t=e.state.questions;e.shuffleAlternatives(t[c])}));case 6:case"end":return t.stop()}}),t)}))),e.shuffleArray=function(e){for(var t=e.length-1;t>0;t-=1){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e},e.shuffleAlternatives=function(t){var a=t.incorrect_answers.map((function(e){return{answer:e,isCorrectAnswer:!1,difficulty:t.difficulty}}));a=[].concat(Object(W.a)(a),[{answer:t.correct_answer,isCorrectAnswer:!0,difficulty:t.difficulty}]);var n=e.shuffleArray(a);e.setState({shuffledAlternatives:n})},e.calculatePoints=function(){var t=Object(h.a)(f.a.mark((function t(a,n){var r,c,s,i,o,u;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.dispatchScore,c=10,s=3,i=2,o=1,t.t0=a,t.next="hard"===t.t0?8:"medium"===t.t0?10:"easy"===t.t0?12:14;break;case 8:return u=c+n*s,t.abrupt("break",15);case 10:return u=c+n*i,t.abrupt("break",15);case 12:return u=c+n*o,t.abrupt("break",15);case 14:return t.abrupt("return",0);case 15:e.setState((function(e){return{score:e.score+u}})),r(u);case 17:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.handleAnswerClick=function(t){t.preventDefault();var a=t.target,n=a.value,r=a.name;if(e.setState({correctAlt:"CorrectAns",incorrectAlt:"IncorrectAns",isClicked:!0,timer:0}),"correct"===n){var c=e.state.timer;e.calculatePoints(r,c)}},e.handleRanking=function(){var t=F(),a=e.state.score,n=e.props.name,r=JSON.parse(localStorage.getItem("users"))||[],c={name:n,score:a,picture:t};r=[].concat(Object(W.a)(r),[c]),localStorage.setItem("users",JSON.stringify(r))},e.handleNextButton=function(){var t=e.state.index,a=e.props.history;4===t?(e.handleRanking(),a.push("/feedback")):e.setState((function(e){return{index:e.index+1,timer:30,timeout:!1,correctAlt:"",incorrectAlt:""}}),(function(){e.handleNextQuestion()}))},e.handleNextQuestion=function(){var t=e.state,a=t.index,n=t.questions;e.handleTimer(),e.shuffleAlternatives(n[a])},e.renderAlternatives=function(){var t=e.state,a=t.correctAlt,n=t.incorrectAlt,c=t.shuffledAlternatives,s=t.timeout;return c.map((function(t,c){return r.a.createElement("button",{key:c,type:"button",name:t.difficulty,disabled:s,className:t.isCorrectAnswer?a:n,"data-testid":t.isCorrectAnswer?"correct-answer":"wrong-answer-".concat(c),value:t.isCorrectAnswer?"correct":"wrong",onClick:e.handleAnswerClick},L.a.decode(t.answer))}))},e.state={questions:[],shuffledAlternatives:[],index:0,loading:!0,correctAlt:"",incorrectAlt:"",timer:30,timeout:!1,isClicked:!1,score:0},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.getQuestions(),this.handleTimer()}},{key:"render",value:function(){var e=this.state,t=e.questions,a=e.index,n=e.loading,c=e.timer,s=e.isClicked;return r.a.createElement("div",{className:"quiz-container"},r.a.createElement("div",{className:"questions-container"},n?r.a.createElement(z,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"category","data-testid":"question-category"},t[a].category),r.a.createElement("p",{className:"question","data-testid":"question-text"},L.a.decode(t[a].question)),r.a.createElement("div",{className:"alternatives","data-testid":"answer-options"},this.renderAlternatives()),r.a.createElement("div",null,r.a.createElement("img",{className:"timer-img",src:G.a,alt:"timer"}),r.a.createElement("p",null,c))),s&&r.a.createElement("div",{className:"div-btn-next"},r.a.createElement("button",{type:"button",className:"btn-next","data-testid":"btn-next",onClick:this.handleNextButton},"Next"))))}}]),a}(n.Component);Y.defaultProps={propsQuestions:{}};var H=Object(o.b)((function(e){return{token:e.token,propsQuestions:e.trivia.payload,name:e.player.name}}),(function(e){return{dispatchFetchQuestions:function(t){return e(function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_QUESTIONS"}),t.prev=1,t.next=4,fetch("https://opentdb.com/api.php?amount=5&token=".concat(e));case 4:return n=t.sent,t.next=7,n.json();case 7:return r=t.sent,t.abrupt("return",a(E(r)));case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",a(v(t.t0)));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))},dispatchScore:function(t){return e(function(e){return{type:"SET_SCORE",score:e}}(t))}}}))(Y),$=function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("div",null,r.a.createElement(M,null),r.a.createElement(H,{history:e}))}}]),a}(n.Component),V=function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es"))}}]),a}(n.Component),X=(a(58),function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(C.a)(this,a),(n=t.call(this,e)).state={users:[]},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("users"));e.sort((function(e,t){return t.score-e.score})),this.setState({users:e})}},{key:"render",value:function(){var e=this.state.users;return r.a.createElement("main",{className:"ranking-page"},r.a.createElement("h1",{"data-testid":"ranking-title",className:"ranking-title"},"Ranking"),r.a.createElement("section",{className:"ranking-container"},e.map((function(e,t){return r.a.createElement("div",{key:t,className:"user-wrapper"},r.a.createElement("img",{src:e.picture,alt:"Foto de ".concat(e.score),className:"header-profile"}),r.a.createElement("span",{"data-testid":"player-name".concat(t),className:"user-name"},e.name),r.a.createElement("span",{"data-testid":"player-score".concat(t),className:"user-score"},"\u2b50 ".concat(e.score)))}))),r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-go-home",type:"button",className:"go-home-button"},"Home")))}}]),a}(n.Component)),Z=(a(59),a(34)),ee=a.n(Z),te=a(35),ae=a.n(te),ne=function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score;return r.a.createElement("div",null,r.a.createElement(M,null),r.a.createElement("main",{className:"main-feedback"},r.a.createElement("div",{className:"feedback-container"},r.a.createElement("h1",{"data-testid":"feedback-text"},t>=3?"Well Done!":"Could be better..."),t>=3?r.a.createElement("img",{className:"img-feedback",alt:"",src:ae.a}):r.a.createElement("img",{className:"img-feedback",alt:"",src:ee.a}),r.a.createElement("p",{"data-testid":"feedback-total-score"},"\u2b50 Score: ".concat(a)),r.a.createElement("p",{"data-testid":"feedback-total-question"},"\u2705 Corrects: ".concat(t))),r.a.createElement("section",{className:"btn-container"},r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{type:"button",className:"btn-feedback","data-testid":"btn-play-again"},"\ud83c\udfae Play Again")),r.a.createElement(i.b,{to:"/ranking"},r.a.createElement("button",{type:"button",className:"btn-feedback","data-testid":"btn-ranking"},"\ud83c\udfc6 Ranking")))))}}]),a}(n.Component),re=Object(o.b)((function(e){return{assertions:e.player.assertions,score:e.player.score}}),null)(ne),ce=(a(60),function(e){Object(A.a)(a,e);var t=Object(T.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement(_.c,null,r.a.createElement(_.a,{path:"/quiz",component:$}),r.a.createElement(_.a,{path:"/",exact:!0,component:Q}),r.a.createElement(_.a,{path:"/configuracoes",component:V}),r.a.createElement(_.a,{path:"/ranking",component:X}),r.a.createElement(_.a,{path:"/feedback",component:re}))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,{basename:"/trivia-game"},r.a.createElement(o.a,{store:S},r.a.createElement(ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.ade99aaf.chunk.js.map