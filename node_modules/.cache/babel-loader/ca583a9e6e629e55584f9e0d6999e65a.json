{"ast":null,"code":"var _jsxFileName = \"/home/ramond/Documentos/projetos-trybe/sd-019-a-project-trivia-react-redux/src/components/Timer.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { timerFinished } from '../redux/actions/index';\n\nclass Timer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.timer = () => {\n      const oneSecond = 1000;\n      this.intervalID = setInterval(() => {\n        this.setState(prevState => ({\n          timer: prevState.timer === 0 ? 0 : prevState.timer - 1\n        }), () => {\n          const {\n            timer\n          } = this.state;\n          const {\n            dispatchTimer\n          } = this.props;\n\n          if (timer === 0) {\n            dispatchTimer();\n          }\n        });\n      }, oneSecond);\n    };\n\n    this.state = {\n      timer: 30\n    };\n  }\n\n  componentDidMount() {\n    this.timer();\n  }\n\n  componentDidUpdate() {\n    const {\n      getTimer\n    } = this.props; // const { timer } = this.state;\n\n    if (getTimer) {\n      getTimer(this.state);\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalID);\n  }\n\n  render() {\n    const {\n      timer\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }\n    }, timer);\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => ({\n  dispatchTimer: () => dispatch(timerFinished())\n});\n\nTimer.propTypes = {\n  dispatchTimer: PropTypes.func.isRequired,\n  getTimer: PropTypes.func.isRequired\n};\nexport default connect(null, mapDispatchToProps)(Timer);","map":{"version":3,"sources":["/home/ramond/Documentos/projetos-trybe/sd-019-a-project-trivia-react-redux/src/components/Timer.js"],"names":["React","Component","connect","PropTypes","timerFinished","Timer","constructor","props","timer","oneSecond","intervalID","setInterval","setState","prevState","state","dispatchTimer","componentDidMount","componentDidUpdate","getTimer","componentWillUnmount","clearInterval","render","mapDispatchToProps","dispatch","propTypes","func","isRequired"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,aAAT,QAA8B,wBAA9B;;AAEA,MAAMC,KAAN,SAAoBJ,SAApB,CAA8B;AAC5BK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAqBnBC,KArBmB,GAqBX,MAAM;AACZ,YAAMC,SAAS,GAAG,IAAlB;AACA,WAAKC,UAAL,GAAkBC,WAAW,CAAC,MAAM;AAClC,aAAKC,QAAL,CAAeC,SAAD,KAAgB;AAAEL,UAAAA,KAAK,EAAEK,SAAS,CAACL,KAAV,KAAoB,CAApB,GACnC,CADmC,GAC/BK,SAAS,CAACL,KAAV,GAAkB;AADI,SAAhB,CAAd,EACgC,MAAM;AACpC,gBAAM;AAAEA,YAAAA;AAAF,cAAY,KAAKM,KAAvB;AACA,gBAAM;AAAEC,YAAAA;AAAF,cAAoB,KAAKR,KAA/B;;AACA,cAAIC,KAAK,KAAK,CAAd,EAAiB;AAAEO,YAAAA,aAAa;AAAK;AACtC,SALD;AAMD,OAP4B,EAO1BN,SAP0B,CAA7B;AAQD,KA/BkB;;AAEjB,SAAKK,KAAL,GAAa;AACXN,MAAAA,KAAK,EAAE;AADI,KAAb;AAGD;;AAEDQ,EAAAA,iBAAiB,GAAG;AAClB,SAAKR,KAAL;AACD;;AAEDS,EAAAA,kBAAkB,GAAG;AACnB,UAAM;AAAEC,MAAAA;AAAF,QAAe,KAAKX,KAA1B,CADmB,CAEnB;;AACA,QAAIW,QAAJ,EAAc;AAAEA,MAAAA,QAAQ,CAAC,KAAKJ,KAAN,CAAR;AAAuB;AACxC;;AAEDK,EAAAA,oBAAoB,GAAG;AACrBC,IAAAA,aAAa,CAAC,KAAKV,UAAN,CAAb;AACD;;AAcDW,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEb,MAAAA;AAAF,QAAY,KAAKM,KAAvB;AACA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKN,KAAL,CADF;AAGD;;AAvC2B;;AA0C9B,MAAMc,kBAAkB,GAAIC,QAAD,KAAe;AACxCR,EAAAA,aAAa,EAAE,MAAMQ,QAAQ,CAACnB,aAAa,EAAd;AADW,CAAf,CAA3B;;AAIAC,KAAK,CAACmB,SAAN,GAAmB;AACjBT,EAAAA,aAAa,EAAEZ,SAAS,CAACsB,IAAV,CAAeC,UADb;AAEjBR,EAAAA,QAAQ,EAAEf,SAAS,CAACsB,IAAV,CAAeC;AAFR,CAAnB;AAKA,eAAexB,OAAO,CAAC,IAAD,EAAOoB,kBAAP,CAAP,CAAkCjB,KAAlC,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { timerFinished } from '../redux/actions/index';\n\nclass Timer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      timer: 30,\n    };\n  }\n\n  componentDidMount() {\n    this.timer();\n  }\n\n  componentDidUpdate() {\n    const { getTimer } = this.props;\n    // const { timer } = this.state;\n    if (getTimer) { getTimer(this.state); }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalID);\n  }\n\n  timer = () => {\n    const oneSecond = 1000;\n    this.intervalID = setInterval(() => {\n      this.setState((prevState) => ({ timer: prevState.timer === 0\n        ? 0 : prevState.timer - 1 }), () => {\n        const { timer } = this.state;\n        const { dispatchTimer } = this.props;\n        if (timer === 0) { dispatchTimer(); }\n      });\n    }, oneSecond);\n  }\n\n  render() {\n    const { timer } = this.state;\n    return (\n      <p>{ timer }</p>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchTimer: () => dispatch(timerFinished()),\n});\n\nTimer.propTypes = ({\n  dispatchTimer: PropTypes.func.isRequired,\n  getTimer: PropTypes.func.isRequired,\n});\n\nexport default connect(null, mapDispatchToProps)(Timer);\n"]},"metadata":{},"sourceType":"module"}