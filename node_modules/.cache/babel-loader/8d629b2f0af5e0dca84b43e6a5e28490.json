{"ast":null,"code":"var _jsxFileName = \"/home/ramond/Documentos/projetos-trybe/sd-019-a-project-trivia-react-redux/src/components/Question.js\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchQuestions, scoreAction } from '../redux/actions';\nimport Loading from './Loading';\nimport Timer from './Timer';\nimport '../Question.css';\n\nclass Question extends Component {\n  constructor() {\n    super();\n\n    this.getTimer = timer => timer;\n\n    this.fetchAux = async () => {\n      const {\n        fetch,\n        token\n      } = this.props;\n      await fetch(token);\n      const {\n        questions\n      } = this.props;\n      this.setState({\n        questions: questions.results,\n        loading: false\n      });\n    };\n\n    this.shuffleArray = array => {\n      for (let i = array.length - 1; i > 0; i -= 1) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n      }\n\n      return array;\n    };\n\n    this.calculatePoints = difficulty => {\n      const {\n        score\n      } = this.props;\n      const timer = this.getTimer();\n      console.log(timer);\n      const standardPoint = 10;\n      const hardPoint = 3;\n      const mediumPoint = 2;\n      const easyPoint = 1;\n      let totalScore;\n\n      switch (difficulty) {\n        case 'hard':\n          totalScore = standardPoint + timer * hardPoint;\n          break;\n\n        case 'medium':\n          totalScore = standardPoint + timer * mediumPoint;\n          break;\n\n        case 'easy':\n          totalScore = standardPoint + timer * easyPoint;\n          break;\n\n        default:\n          return 0;\n      }\n\n      score(Number(totalScore));\n    };\n\n    this.handleAnswerClick = e => {\n      const {\n        target: {\n          value,\n          name\n        }\n      } = e;\n      e.preventDefault();\n      console.log(value);\n      this.setState({\n        correctAlt: 'CorrectAns',\n        incorrectAlt: 'IncorrectAns'\n      });\n\n      if (value === 'correct') {\n        this.calculatePoints(name);\n      }\n    };\n\n    this.renderRandomQuestions = object => {\n      const {\n        isTimeFinished\n      } = this.props;\n      const {\n        correctAlt,\n        incorrectAlt\n      } = this.state;\n      const correctAnswer = /*#__PURE__*/React.createElement(\"button\", {\n        key: \"0\",\n        type: \"button\",\n        \"data-testid\": \"correct-answer\",\n        value: \"correct\",\n        name: object.difficulty,\n        className: correctAlt,\n        disabled: isTimeFinished,\n        onClick: this.handleAnswerClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 7\n        }\n      }, object.correct_answer);\n      const incorrectAnswers = object.incorrect_answers.map((answer, i) => /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.handleAnswerClick,\n        className: incorrectAlt,\n        key: i + 1,\n        value: \"incorrect\",\n        type: \"button\",\n        \"data-testid\": `wrong-answer-${i}`,\n        disabled: isTimeFinished,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 7\n        }\n      }, answer));\n      const allAnswers = [correctAnswer, ...incorrectAnswers];\n      const shuffledArray = this.shuffleArray(allAnswers);\n      return shuffledArray.map(answer => answer);\n    };\n\n    this.state = {\n      questions: [],\n      index: 0,\n      loading: true,\n      correctAlt: '',\n      incorrectAlt: ''\n    };\n  }\n\n  componentDidMount() {\n    this.fetchAux();\n  }\n\n  render() {\n    const {\n      questions,\n      index,\n      loading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, loading ? /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"question-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }, questions[index].category), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"question-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, questions[index].question), /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"answer-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    }, this.renderRandomQuestions(questions[index])), /*#__PURE__*/React.createElement(Timer, {\n      getTimer: this.getTimer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  token: state.token,\n  questions: state.trivia.payload,\n  isTimeFinished: state.trivia.timeout,\n  score: state.player.score\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetch: token => dispatch(fetchQuestions(token)),\n  score: score => dispatch(scoreAction(score))\n});\n\nQuestion.defaultProps = {\n  questions: {},\n  isTimeFinished: false\n};\nQuestion.propTypes = {\n  fetch: PropTypes.func.isRequired,\n  token: PropTypes.string.isRequired,\n  questions: PropTypes.objectOf(PropTypes.any),\n  isTimeFinished: PropTypes.bool,\n  score: PropTypes.func.isRequired\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);","map":{"version":3,"sources":["/home/ramond/Documentos/projetos-trybe/sd-019-a-project-trivia-react-redux/src/components/Question.js"],"names":["PropTypes","React","Component","connect","fetchQuestions","scoreAction","Loading","Timer","Question","constructor","getTimer","timer","fetchAux","fetch","token","props","questions","setState","results","loading","shuffleArray","array","i","length","j","Math","floor","random","calculatePoints","difficulty","score","console","log","standardPoint","hardPoint","mediumPoint","easyPoint","totalScore","Number","handleAnswerClick","e","target","value","name","preventDefault","correctAlt","incorrectAlt","renderRandomQuestions","object","isTimeFinished","state","correctAnswer","correct_answer","incorrectAnswers","incorrect_answers","map","answer","allAnswers","shuffledArray","index","componentDidMount","render","category","question","mapStateToProps","trivia","payload","timeout","player","mapDispatchToProps","dispatch","defaultProps","propTypes","func","isRequired","string","objectOf","any","bool"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchQuestions, scoreAction } from '../redux/actions';\nimport Loading from './Loading';\nimport Timer from './Timer';\nimport '../Question.css';\n\nclass Question extends Component {\n  constructor() {\n    super();\n    this.state = {\n      questions: [],\n      index: 0,\n      loading: true,\n      correctAlt: '',\n      incorrectAlt: '',\n    };\n  }\n\n  componentDidMount() {\n    this.fetchAux();\n  }\n\n  getTimer = (timer) => timer;\n\n  fetchAux = async () => {\n    const { fetch, token } = this.props;\n    await fetch(token);\n    const { questions } = this.props;\n    this.setState({ questions: questions.results, loading: false });\n  }\n\n  // https://www.horadecodar.com.br/2021/05/10/como-embaralhar-um-array-em-javascript-shuffle/\n  shuffleArray = (array) => {\n    for (let i = array.length - 1; i > 0; i -= 1) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n  }\n\n  calculatePoints = (difficulty) => {\n    const { score } = this.props;\n    const timer = this.getTimer();\n    console.log(timer);\n    const standardPoint = 10;\n    const hardPoint = 3;\n    const mediumPoint = 2;\n    const easyPoint = 1;\n    let totalScore;\n\n    switch (difficulty) {\n    case 'hard':\n      totalScore = (standardPoint + (timer * hardPoint));\n      break;\n    case 'medium':\n      totalScore = (standardPoint + (timer * mediumPoint));\n      break;\n    case 'easy':\n      totalScore = (standardPoint + (timer * easyPoint));\n      break;\n    default:\n      return 0;\n    }\n    score(Number(totalScore));\n  }\n\n  handleAnswerClick = (e) => {\n    const { target: { value, name } } = e;\n    e.preventDefault();\n    console.log(value);\n    this.setState({\n      correctAlt: 'CorrectAns',\n      incorrectAlt: 'IncorrectAns',\n    });\n\n    if (value === 'correct') {\n      this.calculatePoints(name);\n    }\n  }\n\n  renderRandomQuestions = (object) => {\n    const { isTimeFinished } = this.props;\n    const { correctAlt, incorrectAlt } = this.state;\n    const correctAnswer = (\n      <button\n        key=\"0\"\n        type=\"button\"\n        data-testid=\"correct-answer\"\n        value=\"correct\"\n        name={ object.difficulty }\n        className={ correctAlt }\n        disabled={ isTimeFinished }\n        onClick={ this.handleAnswerClick }\n      >\n        {object.correct_answer}\n      </button>);\n    const incorrectAnswers = object.incorrect_answers.map((answer, i) => (\n      <button\n        onClick={ this.handleAnswerClick }\n        className={ incorrectAlt }\n        key={ i + 1 }\n        value=\"incorrect\"\n        type=\"button\"\n        data-testid={ `wrong-answer-${i}` }\n        disabled={ isTimeFinished }\n      >\n        { answer }\n      </button>));\n\n    const allAnswers = [correctAnswer, ...incorrectAnswers];\n    const shuffledArray = this.shuffleArray(allAnswers);\n    return shuffledArray.map((answer) => answer);\n  }\n\n  render() {\n    const { questions, index, loading } = this.state;\n    return (\n      <div>\n        { loading\n          ? <Loading />\n          : (\n            <>\n              <p data-testid=\"question-category\">{questions[index].category}</p>\n              <p data-testid=\"question-text\">{questions[index].question}</p>\n              <div data-testid=\"answer-options\">\n                { this.renderRandomQuestions(questions[index]) }\n              </div>\n              <Timer getTimer={ this.getTimer } />\n            </>\n          ) }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  token: state.token,\n  questions: state.trivia.payload,\n  isTimeFinished: state.trivia.timeout,\n  score: state.player.score,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  fetch: (token) => dispatch(fetchQuestions(token)),\n  score: (score) => dispatch(scoreAction(score)),\n});\n\nQuestion.defaultProps = ({\n  questions: {},\n  isTimeFinished: false,\n});\n\nQuestion.propTypes = ({\n  fetch: PropTypes.func.isRequired,\n  token: PropTypes.string.isRequired,\n  questions: PropTypes.objectOf(PropTypes.any),\n  isTimeFinished: PropTypes.bool,\n  score: PropTypes.func.isRequired,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);\n"]},"metadata":{},"sourceType":"module"}