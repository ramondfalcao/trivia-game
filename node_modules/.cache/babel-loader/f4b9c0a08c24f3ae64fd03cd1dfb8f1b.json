{"ast":null,"code":"var _jsxFileName = \"/home/ramond/Documentos/projetos-trybe/sd-019-a-project-trivia-react-redux/src/components/Question.js\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchQuestions, scoreAction, timerFinished } from '../redux/actions';\nimport Loading from './Loading';\nimport './Question.css'; // import Timer from './Timer';\n\nclass Question extends Component {\n  constructor() {\n    super();\n\n    this.setClassName = () => {\n      const {\n        shuffledAlternatives\n      } = this.state; // correctAlt, incorrectAlt,\n\n      const newArray = shuffledAlternatives.map(alternative => {\n        if (alternative.props.value === 'correct') {\n          console.log(alternative); // alternative.props.className = correctAlt;\n\n          return alternative;\n        }\n\n        if (alternative.props.value === 'incorrect') {\n          // alternative.props.className = incorrectAlt;\n          return alternative;\n        }\n\n        return alternative;\n      });\n      this.setState({\n        shuffledAlternatives: newArray\n      });\n    };\n\n    this.timer = () => {\n      const oneSecond = 1000;\n      this.intervalID = setInterval(() => {\n        this.setState(prevState => ({\n          timer: prevState.timer === 0 ? 0 : prevState.timer - 1\n        }), () => {\n          const {\n            timer\n          } = this.state;\n          const {\n            dispatchTimer\n          } = this.props;\n\n          if (timer === 0) {\n            dispatchTimer();\n            clearInterval(this.intervalID);\n          }\n        });\n      }, oneSecond);\n    };\n\n    this.fetchAux = async () => {\n      const {\n        fetch,\n        token\n      } = this.props;\n      const {\n        index\n      } = this.state;\n      await fetch(token);\n      const {\n        propsQuestions\n      } = this.props;\n      this.setState({\n        questions: propsQuestions.results,\n        loading: false\n      }, () => {\n        const {\n          questions\n        } = this.state;\n        this.shuffleAlternatives(questions[index]);\n      });\n    };\n\n    this.shuffleArray = array => {\n      for (let i = array.length - 1; i > 0; i -= 1) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n      }\n\n      return array;\n    };\n\n    this.calculatePoints = async (difficulty, answerTimer) => {\n      const {\n        score\n      } = this.props;\n      const standardPoint = 10;\n      const hardPoint = 3;\n      const mediumPoint = 2;\n      const easyPoint = 1;\n      let totalScore;\n\n      switch (difficulty) {\n        case 'hard':\n          // console.log(answerTimer);\n          totalScore = standardPoint + answerTimer * hardPoint;\n          break;\n\n        case 'medium':\n          // console.log(answerTimer);\n          totalScore = standardPoint + answerTimer * mediumPoint;\n          break;\n\n        case 'easy':\n          // console.log(answerTimer);\n          totalScore = standardPoint + answerTimer * easyPoint;\n          break;\n\n        default:\n          return 0;\n      }\n\n      score(totalScore);\n    };\n\n    this.handleAnswerClick = e => {\n      e.preventDefault();\n      const {\n        target: {\n          value,\n          name\n        }\n      } = e;\n      this.setState({\n        correctAlt: 'CorrectAns',\n        incorrectAlt: 'IncorrectAns'\n      });\n\n      if (value === 'correct') {\n        const {\n          timer\n        } = this.state;\n        this.calculatePoints(name, timer);\n      }\n    };\n\n    this.shuffleAlternatives = object => {\n      const {\n        timeout\n      } = this.props;\n      const {\n        correctAlt,\n        incorrectAlt\n      } = this.state;\n      const correctAnswer = /*#__PURE__*/React.createElement(\"button\", {\n        key: \"0\",\n        type: \"button\",\n        \"data-testid\": \"correct-answer\",\n        value: \"correct\",\n        name: object.difficulty,\n        className: correctAlt,\n        disabled: timeout,\n        onClick: this.handleAnswerClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }\n      }, object.correct_answer);\n      const incorrectAnswers = object.incorrect_answers.map((answer, i) => /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.handleAnswerClick,\n        className: incorrectAlt,\n        key: i + 1,\n        value: \"incorrect\",\n        type: \"button\",\n        \"data-testid\": `wrong-answer-${i}`,\n        disabled: timeout,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 7\n        }\n      }, answer));\n      const allAnswers = [correctAnswer, ...incorrectAnswers];\n      const shuffledArray = this.shuffleArray(allAnswers);\n      this.setState({\n        shuffledAlternatives: shuffledArray\n      });\n    };\n\n    this.state = {\n      questions: [],\n      shuffledAlternatives: [],\n      index: 0,\n      loading: true,\n      correctAlt: '',\n      incorrectAlt: '',\n      timer: 30\n    };\n  }\n\n  componentDidMount() {\n    this.fetchAux(); // this.shuffleAlternatives();\n\n    this.timer();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      correctAlt\n    } = this.state;\n\n    if (prevState.correctAlt !== correctAlt) {\n      this.setClassName();\n    }\n  }\n\n  render() {\n    const {\n      questions,\n      index,\n      loading,\n      shuffledAlternatives,\n      timer\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 7\n      }\n    }, loading ? /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"question-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, questions[index].category), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"question-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, questions[index].question), /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"answer-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }, shuffledAlternatives.map(answer => answer)), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, timer)));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  token: state.token,\n  propsQuestions: state.trivia.payload,\n  timeout: state.trivia.timeout,\n  score: state.player.score\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetch: token => dispatch(fetchQuestions(token)),\n  score: score => dispatch(scoreAction(score)),\n  dispatchTimer: () => dispatch(timerFinished())\n});\n\nQuestion.defaultProps = {\n  propsQuestions: {},\n  timeout: false\n};\nQuestion.propTypes = {\n  fetch: PropTypes.func.isRequired,\n  token: PropTypes.string.isRequired,\n  propsQuestions: PropTypes.objectOf(PropTypes.any),\n  timeout: PropTypes.bool,\n  score: PropTypes.func.isRequired,\n  dispatchTimer: PropTypes.func.isRequired\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);","map":{"version":3,"sources":["/home/ramond/Documentos/projetos-trybe/sd-019-a-project-trivia-react-redux/src/components/Question.js"],"names":["PropTypes","React","Component","connect","fetchQuestions","scoreAction","timerFinished","Loading","Question","constructor","setClassName","shuffledAlternatives","state","newArray","map","alternative","props","value","console","log","setState","timer","oneSecond","intervalID","setInterval","prevState","dispatchTimer","clearInterval","fetchAux","fetch","token","index","propsQuestions","questions","results","loading","shuffleAlternatives","shuffleArray","array","i","length","j","Math","floor","random","calculatePoints","difficulty","answerTimer","score","standardPoint","hardPoint","mediumPoint","easyPoint","totalScore","handleAnswerClick","e","preventDefault","target","name","correctAlt","incorrectAlt","object","timeout","correctAnswer","correct_answer","incorrectAnswers","incorrect_answers","answer","allAnswers","shuffledArray","componentDidMount","componentDidUpdate","prevProps","render","category","question","mapStateToProps","trivia","payload","player","mapDispatchToProps","dispatch","defaultProps","propTypes","func","isRequired","string","objectOf","any","bool"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchQuestions, scoreAction, timerFinished } from '../redux/actions';\nimport Loading from './Loading';\nimport './Question.css';\n// import Timer from './Timer';\n\nclass Question extends Component {\n  constructor() {\n    super();\n    this.state = {\n      questions: [],\n      shuffledAlternatives: [],\n      index: 0,\n      loading: true,\n      correctAlt: '',\n      incorrectAlt: '',\n      timer: 30,\n    };\n  }\n\n  componentDidMount() {\n    this.fetchAux();\n    // this.shuffleAlternatives();\n    this.timer();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { correctAlt } = this.state;\n    if (prevState.correctAlt !== correctAlt) {\n      this.setClassName();\n    }\n  }\n\n  setClassName = () => {\n    const { shuffledAlternatives } = this.state;\n    // correctAlt, incorrectAlt,\n    const newArray = shuffledAlternatives.map((alternative) => {\n      if (alternative.props.value === 'correct') {\n        console.log(alternative);\n        // alternative.props.className = correctAlt;\n        return alternative;\n      }\n      if (alternative.props.value === 'incorrect') {\n        // alternative.props.className = incorrectAlt;\n        return alternative;\n      }\n      return alternative;\n    });\n    this.setState({ shuffledAlternatives: newArray });\n  }\n\n  timer = () => {\n    const oneSecond = 1000;\n    this.intervalID = setInterval(() => {\n      this.setState((prevState) => ({ timer: prevState.timer === 0\n        ? 0 : prevState.timer - 1 }), () => {\n        const { timer } = this.state;\n        const { dispatchTimer } = this.props;\n        if (timer === 0) {\n          dispatchTimer();\n          clearInterval(this.intervalID);\n        }\n      });\n    }, oneSecond);\n  }\n\n  fetchAux = async () => {\n    const { fetch, token } = this.props;\n    const { index } = this.state;\n    await fetch(token);\n    const { propsQuestions } = this.props;\n    this.setState({ questions: propsQuestions.results, loading: false }, () => {\n      const { questions } = this.state;\n      this.shuffleAlternatives(questions[index]);\n    });\n  }\n\n  // https://www.horadecodar.com.br/2021/05/10/como-embaralhar-um-array-em-javascript-shuffle/\n  shuffleArray = (array) => {\n    for (let i = array.length - 1; i > 0; i -= 1) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n  }\n\n  calculatePoints = async (difficulty, answerTimer) => {\n    const { score } = this.props;\n\n    const standardPoint = 10;\n    const hardPoint = 3;\n    const mediumPoint = 2;\n    const easyPoint = 1;\n    let totalScore;\n\n    switch (difficulty) {\n    case 'hard':\n      // console.log(answerTimer);\n      totalScore = (standardPoint + (answerTimer * hardPoint));\n      break;\n    case 'medium':\n      // console.log(answerTimer);\n      totalScore = (standardPoint + (answerTimer * mediumPoint));\n      break;\n    case 'easy':\n      // console.log(answerTimer);\n      totalScore = (standardPoint + (answerTimer * easyPoint));\n      break;\n    default:\n      return 0;\n    }\n    score(totalScore);\n  }\n\n  handleAnswerClick = (e) => {\n    e.preventDefault();\n    const { target: { value, name } } = e;\n    this.setState({\n      correctAlt: 'CorrectAns',\n      incorrectAlt: 'IncorrectAns',\n    });\n\n    if (value === 'correct') {\n      const { timer } = this.state;\n      this.calculatePoints(name, timer);\n    }\n  }\n\n  shuffleAlternatives = (object) => {\n    const { timeout } = this.props;\n    const { correctAlt, incorrectAlt } = this.state;\n    const correctAnswer = (\n      <button\n        key=\"0\"\n        type=\"button\"\n        data-testid=\"correct-answer\"\n        value=\"correct\"\n        name={ object.difficulty }\n        className={ correctAlt }\n        disabled={ timeout }\n        onClick={ this.handleAnswerClick }\n      >\n        {object.correct_answer}\n      </button>);\n    const incorrectAnswers = object.incorrect_answers.map((answer, i) => (\n      <button\n        onClick={ this.handleAnswerClick }\n        className={ incorrectAlt }\n        key={ i + 1 }\n        value=\"incorrect\"\n        type=\"button\"\n        data-testid={ `wrong-answer-${i}` }\n        disabled={ timeout }\n      >\n        { answer }\n      </button>));\n\n    const allAnswers = [correctAnswer, ...incorrectAnswers];\n    const shuffledArray = this.shuffleArray(allAnswers);\n    this.setState({ shuffledAlternatives: shuffledArray });\n  }\n\n  render() {\n    const { questions, index, loading, shuffledAlternatives, timer } = this.state;\n    return (\n      <div>\n        { loading\n          ? <Loading />\n          : (\n            <>\n              <p data-testid=\"question-category\">{questions[index].category}</p>\n              <p data-testid=\"question-text\">{questions[index].question}</p>\n              <div data-testid=\"answer-options\">\n                { shuffledAlternatives.map((answer) => answer) }\n              </div>\n              <p>{ timer }</p>\n            </>\n          ) }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  token: state.token,\n  propsQuestions: state.trivia.payload,\n  timeout: state.trivia.timeout,\n  score: state.player.score,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  fetch: (token) => dispatch(fetchQuestions(token)),\n  score: (score) => dispatch(scoreAction(score)),\n  dispatchTimer: () => dispatch(timerFinished()),\n});\n\nQuestion.defaultProps = ({\n  propsQuestions: {},\n  timeout: false,\n});\n\nQuestion.propTypes = ({\n  fetch: PropTypes.func.isRequired,\n  token: PropTypes.string.isRequired,\n  propsQuestions: PropTypes.objectOf(PropTypes.any),\n  timeout: PropTypes.bool,\n  score: PropTypes.func.isRequired,\n  dispatchTimer: PropTypes.func.isRequired,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);\n"]},"metadata":{},"sourceType":"module"}