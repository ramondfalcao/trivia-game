{"ast":null,"code":"import md5 from 'crypto-js/md5';\nconst GET_TOKEN = 'GET_TOKEN';\nconst REQUEST_TOKEN = 'REQUEST_TOKEN';\nconst FAILED_REQUEST = 'FAILED_REQUEST';\n\nfunction getToken(json) {\n  return {\n    type: GET_TOKEN,\n    payload: json.token\n  };\n}\n\nfunction requestToken() {\n  return {\n    type: REQUEST_TOKEN\n  };\n}\n\nfunction failedRequest(error) {\n  return {\n    type: FAILED_REQUEST,\n    payload: error\n  };\n}\n\nexport function fetchToken() {\n  return async dispatch => {\n    dispatch(requestToken());\n\n    try {\n      const response = await fetch('https://opentdb.com/api_token.php?command=request');\n      const json = await response.json();\n      return dispatch(getToken(json));\n    } catch (error) {\n      return dispatch(failedRequest(error));\n    }\n  };\n}\n\nconst addNewPlayer = (name, email) => ({\n  type: 'ADD_NEW_PLAYER',\n  name,\n  email\n});\n\nconst addAvatar = avatar => ({\n  type: 'ADD_AVATAR',\n  avatar\n});\n\nexport function fetchAvatar(email) {\n  return async dispatch => {\n    const hashCreated = md5(email).toString(); // console.log(hashCreated);\n\n    const response = await fetch(`https://www.gravatar.com/avatar/${hashCreated}/`);\n    return dispatch(addAvatar(response.url));\n  };\n}\nexport { GET_TOKEN, REQUEST_TOKEN, FAILED_REQUEST, addNewPlayer };","map":{"version":3,"sources":["/home/ramond/Documentos/projetos-trybe/sd-019-a-project-trivia-react-redux/src/redux/actions/index.js"],"names":["md5","GET_TOKEN","REQUEST_TOKEN","FAILED_REQUEST","getToken","json","type","payload","token","requestToken","failedRequest","error","fetchToken","dispatch","response","fetch","addNewPlayer","name","email","addAvatar","avatar","fetchAvatar","hashCreated","toString","url"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,eAAhB;AAEA,MAAMC,SAAS,GAAG,WAAlB;AACA,MAAMC,aAAa,GAAG,eAAtB;AACA,MAAMC,cAAc,GAAG,gBAAvB;;AAEA,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;AACtB,SAAO;AAAEC,IAAAA,IAAI,EAAEL,SAAR;AAAmBM,IAAAA,OAAO,EAAEF,IAAI,CAACG;AAAjC,GAAP;AACD;;AAED,SAASC,YAAT,GAAwB;AACtB,SAAO;AAAEH,IAAAA,IAAI,EAAEJ;AAAR,GAAP;AACD;;AAED,SAASQ,aAAT,CAAuBC,KAAvB,EAA8B;AAC5B,SAAO;AAAEL,IAAAA,IAAI,EAAEH,cAAR;AAAwBI,IAAAA,OAAO,EAAEI;AAAjC,GAAP;AACD;;AAED,OAAO,SAASC,UAAT,GAAsB;AAC3B,SAAO,MAAOC,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAACJ,YAAY,EAAb,CAAR;;AACA,QAAI;AACF,YAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAC,mDAAD,CAA5B;AACA,YAAMV,IAAI,GAAG,MAAMS,QAAQ,CAACT,IAAT,EAAnB;AACA,aAAOQ,QAAQ,CAACT,QAAQ,CAACC,IAAD,CAAT,CAAf;AACD,KAJD,CAIE,OAAOM,KAAP,EAAc;AACd,aAAOE,QAAQ,CAACH,aAAa,CAACC,KAAD,CAAd,CAAf;AACD;AACF,GATD;AAUD;;AAED,MAAMK,YAAY,GAAG,CAACC,IAAD,EAAOC,KAAP,MAAkB;AACrCZ,EAAAA,IAAI,EAAE,gBAD+B;AAErCW,EAAAA,IAFqC;AAGrCC,EAAAA;AAHqC,CAAlB,CAArB;;AAMA,MAAMC,SAAS,GAAIC,MAAD,KAAa;AAC7Bd,EAAAA,IAAI,EAAE,YADuB;AAE7Bc,EAAAA;AAF6B,CAAb,CAAlB;;AAKA,OAAO,SAASC,WAAT,CAAqBH,KAArB,EAA4B;AACjC,SAAO,MAAOL,QAAP,IAAoB;AACzB,UAAMS,WAAW,GAAGtB,GAAG,CAACkB,KAAD,CAAH,CAAWK,QAAX,EAApB,CADyB,CAEzB;;AACA,UAAMT,QAAQ,GAAG,MAAMC,KAAK,CAAE,mCAAkCO,WAAY,GAAhD,CAA5B;AACA,WAAOT,QAAQ,CAACM,SAAS,CAACL,QAAQ,CAACU,GAAV,CAAV,CAAf;AACD,GALD;AAMD;AAED,SACEvB,SADF,EAEEC,aAFF,EAGEC,cAHF,EAIEa,YAJF","sourcesContent":["import md5 from 'crypto-js/md5';\n\nconst GET_TOKEN = 'GET_TOKEN';\nconst REQUEST_TOKEN = 'REQUEST_TOKEN';\nconst FAILED_REQUEST = 'FAILED_REQUEST';\n\nfunction getToken(json) {\n  return { type: GET_TOKEN, payload: json.token };\n}\n\nfunction requestToken() {\n  return { type: REQUEST_TOKEN };\n}\n\nfunction failedRequest(error) {\n  return { type: FAILED_REQUEST, payload: error };\n}\n\nexport function fetchToken() {\n  return async (dispatch) => {\n    dispatch(requestToken());\n    try {\n      const response = await fetch('https://opentdb.com/api_token.php?command=request');\n      const json = await response.json();\n      return dispatch(getToken(json));\n    } catch (error) {\n      return dispatch(failedRequest(error));\n    }\n  };\n}\n\nconst addNewPlayer = (name, email) => ({\n  type: 'ADD_NEW_PLAYER',\n  name,\n  email,\n});\n\nconst addAvatar = (avatar) => ({\n  type: 'ADD_AVATAR',\n  avatar,\n});\n\nexport function fetchAvatar(email) {\n  return async (dispatch) => {\n    const hashCreated = md5(email).toString();\n    // console.log(hashCreated);\n    const response = await fetch(`https://www.gravatar.com/avatar/${hashCreated}/`);\n    return dispatch(addAvatar(response.url));\n  };\n}\n\nexport {\n  GET_TOKEN,\n  REQUEST_TOKEN,\n  FAILED_REQUEST,\n  addNewPlayer,\n};\n"]},"metadata":{},"sourceType":"module"}