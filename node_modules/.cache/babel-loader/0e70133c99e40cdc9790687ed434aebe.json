{"ast":null,"code":"var _jsxFileName = \"/home/ramond/Documentos/projetos-trybe/sd-019-a-project-trivia-react-redux/src/components/Question.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchQuestions, scoreAction, timerFinished } from '../redux/actions';\nimport Loading from './Loading';\nimport './Question.css';\n\nclass Question extends Component {\n  constructor() {\n    super();\n\n    this.handleTimer = () => {\n      const oneSecond = 1000;\n      this.intervalID = setInterval(() => {\n        this.setState(prevState => ({\n          timer: prevState.timer === 0 ? 0 : prevState.timer - 1\n        }), () => {\n          const {\n            timer\n          } = this.state;\n          const {\n            dispatchTimer\n          } = this.props;\n\n          if (timer === 0) {\n            dispatchTimer();\n            clearInterval(this.intervalID);\n          }\n        });\n      }, oneSecond);\n    };\n\n    this.getQuestions = async () => {\n      const {\n        dispatchFetchQuestions,\n        token\n      } = this.props;\n      const {\n        index\n      } = this.state;\n      await dispatchFetchQuestions(token);\n      const {\n        propsQuestions\n      } = this.props;\n      this.setState({\n        questions: propsQuestions.results,\n        loading: false\n      }, () => {\n        const {\n          questions\n        } = this.state;\n        this.shuffleAlternatives(questions[index]);\n      });\n    };\n\n    this.shuffleArray = array => {\n      for (let i = array.length - 1; i > 0; i -= 1) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n      }\n\n      return array;\n    };\n\n    this.shuffleAlternatives = object => {\n      let alternatives = object.incorrect_answers.map(answer => ({\n        answer,\n        isCorrectAnswer: false,\n        difficulty: object.difficulty\n      }));\n      alternatives = [...alternatives, {\n        answer: object.correct_answer,\n        isCorrectAnswer: true,\n        difficulty: object.difficulty\n      }];\n      const shuffledArray = this.shuffleArray(alternatives);\n      this.setState({\n        shuffledAlternatives: shuffledArray\n      });\n    };\n\n    this.calculatePoints = async (difficulty, answerTime) => {\n      const {\n        dispatchScore\n      } = this.props;\n      const standardPoint = 10;\n      const hardPoint = 3;\n      const mediumPoint = 2;\n      const easyPoint = 1;\n      let totalScore;\n\n      switch (difficulty) {\n        case 'hard':\n          totalScore = standardPoint + answerTime * hardPoint;\n          break;\n\n        case 'medium':\n          totalScore = standardPoint + answerTime * mediumPoint;\n          break;\n\n        case 'easy':\n          totalScore = standardPoint + answerTime * easyPoint;\n          break;\n\n        default:\n          return 0;\n      }\n\n      dispatchScore(totalScore);\n    };\n\n    this.handleAnswerClick = e => {\n      e.preventDefault();\n      const {\n        target: {\n          value,\n          name\n        }\n      } = e;\n      this.setState({\n        correctAlt: 'CorrectAns',\n        incorrectAlt: 'IncorrectAns',\n        isClicked: true\n      });\n\n      if (value === 'correct') {\n        const {\n          timer\n        } = this.state;\n        this.calculatePoints(name, timer);\n      }\n    };\n\n    this.handleNext = () => {\n      const maxQuestion = 4;\n      const {\n        index\n      } = this.state;\n      const {\n        history\n      } = this.props;\n      console.log(this.props);\n      console.log(history);\n\n      if (index === maxQuestion) {\n        console.log('TESTE');\n        history.push('/feedback');\n      } else {\n        this.setState(prevState => ({\n          index: prevState.index + 1\n        }));\n      }\n    };\n\n    this.renderAlternatives = () => {\n      const {\n        correctAlt,\n        incorrectAlt,\n        shuffledAlternatives\n      } = this.state;\n      const {\n        timeout\n      } = this.props;\n      return shuffledAlternatives.map((alternative, i) => /*#__PURE__*/React.createElement(\"button\", {\n        key: i,\n        type: \"button\",\n        name: alternative.difficulty,\n        disabled: timeout,\n        className: alternative.isCorrectAnswer ? correctAlt : incorrectAlt,\n        \"data-testid\": alternative.isCorrectAnswer ? 'correct-answer' : `wrong-answer-${i}`,\n        value: alternative.isCorrectAnswer ? 'correct' : 'wrong',\n        onClick: this.handleAnswerClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }\n      }, alternative.answer));\n    };\n\n    this.state = {\n      questions: [],\n      shuffledAlternatives: [],\n      index: 0,\n      loading: true,\n      correctAlt: '',\n      incorrectAlt: '',\n      timer: 30,\n      isClicked: false\n    };\n  }\n\n  componentDidMount() {\n    this.getQuestions();\n    this.handleTimer();\n  }\n\n  render() {\n    const {\n      questions,\n      index,\n      loading,\n      timer,\n      isClicked\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 7\n      }\n    }, loading ? /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"question-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }, questions[index].category), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"question-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 15\n      }\n    }, questions[index].question), /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"answer-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, this.renderAlternatives()), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, timer)), isClicked && /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"btn-next\",\n      onClick: this.handleNext,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }, \"Next\"));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  token: state.token,\n  propsQuestions: state.trivia.payload,\n  timeout: state.trivia.timeout\n});\n\nconst mapDispatchToProps = dispatch => ({\n  dispatchFetchQuestions: token => dispatch(fetchQuestions(token)),\n  dispatchScore: score => dispatch(scoreAction(score)),\n  dispatchTimer: () => dispatch(timerFinished())\n});\n\nQuestion.defaultProps = {\n  propsQuestions: {},\n  timeout: false\n};\nQuestion.propTypes = {\n  dispatchFetchQuestions: PropTypes.func.isRequired,\n  token: PropTypes.string.isRequired,\n  propsQuestions: PropTypes.objectOf(PropTypes.any),\n  timeout: PropTypes.bool,\n  dispatchScore: PropTypes.func.isRequired,\n  dispatchTimer: PropTypes.func.isRequired,\n  history: PropTypes.objectOf(PropTypes.any).isRequired\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);","map":{"version":3,"sources":["/home/ramond/Documentos/projetos-trybe/sd-019-a-project-trivia-react-redux/src/components/Question.js"],"names":["React","Component","connect","fetchQuestions","scoreAction","timerFinished","Loading","Question","constructor","handleTimer","oneSecond","intervalID","setInterval","setState","prevState","timer","state","dispatchTimer","props","clearInterval","getQuestions","dispatchFetchQuestions","token","index","propsQuestions","questions","results","loading","shuffleAlternatives","shuffleArray","array","i","length","j","Math","floor","random","object","alternatives","incorrect_answers","map","answer","isCorrectAnswer","difficulty","correct_answer","shuffledArray","shuffledAlternatives","calculatePoints","answerTime","dispatchScore","standardPoint","hardPoint","mediumPoint","easyPoint","totalScore","handleAnswerClick","e","preventDefault","target","value","name","correctAlt","incorrectAlt","isClicked","handleNext","maxQuestion","history","console","log","push","renderAlternatives","timeout","alternative","componentDidMount","render","category","question","mapStateToProps","trivia","payload","mapDispatchToProps","dispatch","score","defaultProps","propTypes","PropTypes","func","isRequired","string","objectOf","any","bool"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchQuestions, scoreAction, timerFinished } from '../redux/actions';\nimport Loading from './Loading';\nimport './Question.css';\n\nclass Question extends Component {\n  constructor() {\n    super();\n    this.state = {\n      questions: [],\n      shuffledAlternatives: [],\n      index: 0,\n      loading: true,\n      correctAlt: '',\n      incorrectAlt: '',\n      timer: 30,\n      isClicked: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getQuestions();\n    this.handleTimer();\n  }\n\n  handleTimer = () => {\n    const oneSecond = 1000;\n    this.intervalID = setInterval(() => {\n      this.setState((prevState) => ({ timer: prevState.timer === 0\n        ? 0 : prevState.timer - 1 }), () => {\n        const { timer } = this.state;\n        const { dispatchTimer } = this.props;\n        if (timer === 0) {\n          dispatchTimer();\n          clearInterval(this.intervalID);\n        }\n      });\n    }, oneSecond);\n  }\n\n  getQuestions = async () => {\n    const { dispatchFetchQuestions, token } = this.props;\n    const { index } = this.state;\n    await dispatchFetchQuestions(token);\n    const { propsQuestions } = this.props;\n    this.setState({ questions: propsQuestions.results, loading: false }, () => {\n      const { questions } = this.state;\n      this.shuffleAlternatives(questions[index]);\n    });\n  }\n\n  // https://www.horadecodar.com.br/2021/05/10/como-embaralhar-um-array-em-javascript-shuffle/\n  shuffleArray = (array) => {\n    for (let i = array.length - 1; i > 0; i -= 1) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n  }\n\n  shuffleAlternatives = (object) => {\n    let alternatives = object.incorrect_answers.map((answer) => ({\n      answer,\n      isCorrectAnswer: false,\n      difficulty: object.difficulty,\n    }));\n\n    alternatives = [...alternatives, {\n      answer: object.correct_answer,\n      isCorrectAnswer: true,\n      difficulty: object.difficulty }];\n\n    const shuffledArray = this.shuffleArray(alternatives);\n    this.setState({ shuffledAlternatives: shuffledArray });\n  }\n\n  calculatePoints = async (difficulty, answerTime) => {\n    const { dispatchScore } = this.props;\n\n    const standardPoint = 10;\n    const hardPoint = 3;\n    const mediumPoint = 2;\n    const easyPoint = 1;\n    let totalScore;\n\n    switch (difficulty) {\n    case 'hard':\n      totalScore = (standardPoint + (answerTime * hardPoint));\n      break;\n    case 'medium':\n      totalScore = (standardPoint + (answerTime * mediumPoint));\n      break;\n    case 'easy':\n      totalScore = (standardPoint + (answerTime * easyPoint));\n      break;\n    default:\n      return 0;\n    }\n    dispatchScore(totalScore);\n  }\n\n  handleAnswerClick = (e) => {\n    e.preventDefault();\n    const { target: { value, name } } = e;\n    this.setState({\n      correctAlt: 'CorrectAns',\n      incorrectAlt: 'IncorrectAns',\n      isClicked: true,\n    });\n\n    if (value === 'correct') {\n      const { timer } = this.state;\n      this.calculatePoints(name, timer);\n    }\n  }\n\n  handleNext = () => {\n    const maxQuestion = 4;\n    const { index } = this.state;\n    const { history } = this.props;\n    console.log(this.props);\n    console.log(history);\n    if (index === maxQuestion) {\n      console.log('TESTE');\n      history.push('/feedback');\n    } else {\n      this.setState((prevState) => ({ index: prevState.index + 1 }));\n    }\n  }\n\n  renderAlternatives = () => {\n    const { correctAlt, incorrectAlt, shuffledAlternatives } = this.state;\n    const { timeout } = this.props;\n    return shuffledAlternatives\n      .map((alternative, i) => (\n        <button\n          key={ i }\n          type=\"button\"\n          name={ alternative.difficulty }\n          disabled={ timeout }\n          className={ alternative.isCorrectAnswer\n            ? correctAlt\n            : incorrectAlt }\n          data-testid={ alternative.isCorrectAnswer\n            ? 'correct-answer' : `wrong-answer-${i}` }\n          value={ alternative.isCorrectAnswer\n            ? 'correct' : 'wrong' }\n          onClick={ this.handleAnswerClick }\n        >\n          { alternative.answer }\n        </button>\n      ));\n  }\n\n  render() {\n    const {\n      questions,\n      index,\n      loading,\n      timer,\n      isClicked,\n    } = this.state;\n\n    return (\n      <div>\n        { loading\n          ? <Loading />\n          : (\n            <>\n              <p data-testid=\"question-category\">{questions[index].category}</p>\n              <p data-testid=\"question-text\">{questions[index].question}</p>\n              <div data-testid=\"answer-options\">\n                { this.renderAlternatives() }\n              </div>\n              <p>{ timer }</p>\n            </>\n          ) }\n        {isClicked && (\n          <button\n            type=\"button\"\n            data-testid=\"btn-next\"\n            onClick={ this.handleNext }\n          >\n            Next\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  token: state.token,\n  propsQuestions: state.trivia.payload,\n  timeout: state.trivia.timeout,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchFetchQuestions: (token) => dispatch(fetchQuestions(token)),\n  dispatchScore: (score) => dispatch(scoreAction(score)),\n  dispatchTimer: () => dispatch(timerFinished()),\n});\n\nQuestion.defaultProps = ({\n  propsQuestions: {},\n  timeout: false,\n});\n\nQuestion.propTypes = ({\n  dispatchFetchQuestions: PropTypes.func.isRequired,\n  token: PropTypes.string.isRequired,\n  propsQuestions: PropTypes.objectOf(PropTypes.any),\n  timeout: PropTypes.bool,\n  dispatchScore: PropTypes.func.isRequired,\n  dispatchTimer: PropTypes.func.isRequired,\n  history: PropTypes.objectOf(PropTypes.any).isRequired,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);\n"]},"metadata":{},"sourceType":"module"}